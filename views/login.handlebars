<div class="container flash-msgs text-center">
  <div class="row error-messages">
    {{#showErrors}}
      <ul class="col-8 no-bullets">
        {{#errors}}
        <li>
            <div class="alert alert-danger alert-dismissible fade show offset-md-4" role="alert">
              <strong id="error-msg">{{.}}</strong>
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
        </li>
        {{/errors}}
      </ul>
    {{/showErrors}}
  </div>
</div>
<div class="login modal-dialog login-modal-dialog text-center">
  <div class="col-sm-9 main-section login-main-section">
    <div class="modal-content login-modal-content">
      <div class="col-12 user-img">
        <img src="/assets/img/face.png" alt="">
      </div>
      <div class="col-12 form-input">
        <form id="my-login-form">
          <div class="form-group login-form-group login-form-group-email">
            <input id="login-email" name="username" type="email" class="form-control" placeholder="Enter Email">
          </div>
          <div class="form-group login-form-group login-form-group-password">
            <input id="login-pass" name="password" type="password" class="form-control" placeholder="Enter Password">
          </div>
          <button id="login-form" name="login" type="submit" class="btn btn-success login-button">
            <i class="fas fa-sign-in-alt"></i>Login</button>
        </form>
      </div>
      <div class="col-12">
        <p class="message registered-text">Not Registered ?
          <a href="/register" class="register-link"> Register </a>
        </p>
      </div>
    </div>
  </div>
</div>

<script>
  const loginForm = document.getElementById('my-login-form');
  loginForm.onsubmit = function (e) {
    
    e.preventDefault();

    if (!loginForm.username.value || !loginForm.password.value) {
      console.log('in login form');
      $('.error-messages').html(`
      <div class="alert alert-danger alert-dismissible fade show offset-md-4" role="alert">
        <strong id="error-msg">Credentials Missing</strong>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>`);
    }

    if (loginForm.username.value && loginForm.password.value) {
      loginForm.setAttribute("method", "POST");
      loginForm.setAttribute("action", "/login");
      loginForm.submit();
    }
  }
</script>